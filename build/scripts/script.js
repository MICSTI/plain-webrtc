var app=angular.module("plain-webrtc",["ui.router","ngMessages"]);app.constant("AppConfig",{"log.info":!0,"log.error":!0}),app.controller("AppCtrl",["$scope","LogSrv","SocketSrv","FocusSrv",function(n,o,r,e){var t={username:null};r.connect(),n.isLoggedIn=function(){return null!==t.username},n.userObj={},n.login=function(e){e?(t.username=n.userObj.username,o.info(t),r.register(t.username)):o.error("Form not valid")},n.user=function(){return t},n.peers=function(){return r.getUsers()},e("username")}]),angular.module("plain-webrtc").factory("FocusSrv",["$timeout","$window",function(n,o){return function(r){n(function(){var n=o.document.getElementById(r);n&&n.focus()})}}]),angular.module("plain-webrtc").factory("LogSrv",["AppConfig",function(n){var o=function(){n["log.info"]&&console.log.apply(console,arguments)},r=function(){n["log.error"]&&console.error.apply(console,arguments)};return{info:o,error:r}}]),angular.module("plain-webrtc").factory("SocketSrv",["$rootScope","LogSrv",function(n,o){var r=null,e=[],t=null,u=function(o,e){r.on(o,function(){var o=arguments;n.$apply(function(){e.apply(r,o)})})},c=function(){r=io.connect(),o.info("Socket connected"),u("id",function(n){t=n}),u("users.update",function(n){i(n)})},i=function(n){e=n.filter(function(n){return n.id!==t})},l=function(n){r.emit("register",{username:n})};return{connect:c,register:l,getUsers:function(){return e}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInNlcnZpY2VzL2ZvY3VzLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9sb2cuc2VydmljZS5qcyIsInNlcnZpY2VzL3NvY2tldC5pby5jbGllbnQuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJsb2cuaW5mbyIsImxvZy5lcnJvciIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJMb2dTcnYiLCJTb2NrZXRTcnYiLCJGb2N1c1NydiIsInVzZXIiLCJ1c2VybmFtZSIsImNvbm5lY3QiLCJpc0xvZ2dlZEluIiwidXNlck9iaiIsImxvZ2luIiwiaXNWYWxpZCIsImluZm8iLCJyZWdpc3RlciIsImVycm9yIiwicGVlcnMiLCJnZXRVc2VycyIsImZhY3RvcnkiLCIkdGltZW91dCIsIiR3aW5kb3ciLCJpZCIsImVsZW1lbnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZm9jdXMiLCJBcHBDb25maWciLCJsb2dJbmZvIiwiY29uc29sZSIsImxvZyIsImFwcGx5IiwiYXJndW1lbnRzIiwibG9nRXJyb3IiLCIkcm9vdFNjb3BlIiwic29ja2V0IiwidXNlcnMiLCJvd25JZCIsIm9uIiwiZXZlbnROYW1lIiwiY2FsbGJhY2siLCJhcmdzIiwiJGFwcGx5IiwiaW8iLCJkYXRhIiwicGFyc2VVc2VyQXJyYXkiLCJfdXNlcnMiLCJmaWx0ZXIiLCJlbWl0Il0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBQSxLQUFBQyxRQUFBQyxPQUFBLGdCQUNBLFlBQ0EsY0FJQUYsS0FBQUcsU0FBQSxhQUNBQyxZQUFBLEVBQ0FDLGFBQUEsSUFHQUwsSUFBQU0sV0FBQSxXQUFBLFNBQUEsU0FBQSxZQUFBLFdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FFQSxHQUFBQyxJQUNBQyxTQUFBLEtBSUFILEdBQUFJLFVBR0FOLEVBQUFPLFdBQUEsV0FDQSxNQUFBLFFBQUFILEVBQUFDLFVBR0FMLEVBQUFRLFdBRUFSLEVBQUFTLE1BQUEsU0FBQUMsR0FDQUEsR0FDQU4sRUFBQUMsU0FBQUwsRUFBQVEsUUFBQUgsU0FDQUosRUFBQVUsS0FBQVAsR0FHQUYsRUFBQVUsU0FBQVIsRUFBQUMsV0FFQUosRUFBQVksTUFBQSxtQkFJQWIsRUFBQUksS0FBQSxXQUNBLE1BQUFBLElBR0FKLEVBQUFjLE1BQUEsV0FDQSxNQUFBWixHQUFBYSxZQUdBWixFQUFBLGVDN0NBVCxRQUNBQyxPQUFBLGdCQUNBcUIsUUFBQSxZQUFBLFdBQUEsVUFBQSxTQUFBQyxFQUFBQyxHQUNBLE1BQUEsVUFBQUMsR0FLQUYsRUFBQSxXQUNBLEdBQUFHLEdBQUFGLEVBQUFHLFNBQUFDLGVBQUFILEVBRUFDLElBQ0FBLEVBQUFHLGNDWkE3QixRQUNBQyxPQUFBLGdCQUNBcUIsUUFBQSxVQUFBLFlBQUEsU0FBQVEsR0FDQSxHQUFBQyxHQUFBLFdBQ0FELEVBQUEsYUFDQUUsUUFBQUMsSUFBQUMsTUFBQUYsUUFBQUcsWUFJQUMsRUFBQSxXQUNBTixFQUFBLGNBQ0FFLFFBQUFiLE1BQUFlLE1BQUFGLFFBQUFHLFdBSUEsUUFDQWxCLEtBQUFjLEVBQ0FaLE1BQUFpQixNQ2pCQXBDLFFBQUFDLE9BQUEsZ0JBQ0FxQixRQUFBLGFBQUEsYUFBQSxTQUFBLFNBQUFlLEVBQUE5QixHQUNBLEdBQUErQixHQUFBLEtBQ0FDLEtBQ0FDLEVBQUEsS0FFQUMsRUFBQSxTQUFBQyxFQUFBQyxHQUNBTCxFQUFBRyxHQUFBQyxFQUFBLFdBQ0EsR0FBQUUsR0FBQVQsU0FFQUUsR0FBQVEsT0FBQSxXQUNBRixFQUFBVCxNQUFBSSxFQUFBTSxRQWlCQWhDLEVBQUEsV0FFQTBCLEVBQUFRLEdBQUFsQyxVQUVBTCxFQUFBVSxLQUFBLG9CQUVBd0IsRUFBQSxLQUFBLFNBQUFNLEdBQ0FQLEVBQUFPLElBR0FOLEVBQUEsZUFBQSxTQUFBTSxHQUNBQyxFQUFBRCxNQUlBQyxFQUFBLFNBQUFDLEdBQ0FWLEVBQUFVLEVBQUFDLE9BQUEsU0FBQXhDLEdBQ0EsTUFBQUEsR0FBQWUsS0FBQWUsS0FJQXRCLEVBQUEsU0FBQVAsR0FDQTJCLEVBQUFhLEtBQUEsWUFDQXhDLFNBQUFBLElBSUEsUUFDQUMsUUFBQUEsRUFDQU0sU0FBQUEsRUFDQUcsU0FBQSxXQUNBLE1BQUFrQiIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJwbGFpbi13ZWJydGNcIiwgW1xyXG4gICAgJ3VpLnJvdXRlcicsXHJcbiAgICAnbmdNZXNzYWdlcydcclxuXSk7XHJcblxyXG4vLyBkZWZpbmUgYXBwbGljYXRpb24gY29uc3RhbnRzXHJcbmFwcC5jb25zdGFudChcIkFwcENvbmZpZ1wiLCB7XHJcbiAgICBcImxvZy5pbmZvXCI6IHRydWUsXHJcbiAgICBcImxvZy5lcnJvclwiOiB0cnVlXHJcbn0pO1xyXG5cclxuYXBwLmNvbnRyb2xsZXIoXCJBcHBDdHJsXCIsIGZ1bmN0aW9uKCRzY29wZSwgTG9nU3J2LCBTb2NrZXRTcnYsIEZvY3VzU3J2KSB7XHJcbiAgICAvLyAtLS0tLS0tLS0tLSBBcHAgY29uZmlnIC0tLS0tLS0tLS0tLVxyXG4gICAgdmFyIHVzZXIgPSB7XHJcbiAgICAgICAgdXNlcm5hbWU6IG51bGxcclxuICAgIH07XHJcblxyXG4gICAgLy8gLS0tLS0tLS0tLS0gQXBwIGluaXRpYWxpemF0aW9uIC0tLS0tLS0tLS0tLVxyXG4gICAgU29ja2V0U3J2LmNvbm5lY3QoKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBTY29wZSBtZXRob2RzIC0tLS0tLS0tLS0tLVxyXG4gICAgJHNjb3BlLmlzTG9nZ2VkSW4gPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdXNlci51c2VybmFtZSAhPT0gbnVsbDtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLnVzZXJPYmogPSB7fTtcclxuXHJcbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbihpc1ZhbGlkKSB7XHJcbiAgICAgICAgaWYgKGlzVmFsaWQpIHtcclxuICAgICAgICAgICAgdXNlci51c2VybmFtZSA9ICRzY29wZS51c2VyT2JqLnVzZXJuYW1lO1xyXG4gICAgICAgICAgICBMb2dTcnYuaW5mbyh1c2VyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJlZ2lzdGVyIHVzZXJuYW1lIHdpdGggc29ja2V0IHNlcnZpY2VcclxuICAgICAgICAgICAgU29ja2V0U3J2LnJlZ2lzdGVyKHVzZXIudXNlcm5hbWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIExvZ1Nydi5lcnJvcignRm9ybSBub3QgdmFsaWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS51c2VyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5wZWVycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBTb2NrZXRTcnYuZ2V0VXNlcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBGb2N1c1NydigndXNlcm5hbWUnKTtcclxuXHJcbiAgICAvLyAtLS0tLS0tLS0tLSBFdmVudCBoYW5kbGluZyAtLS0tLS0tLS0tLS1cclxuXHJcbn0pOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ3BsYWluLXdlYnJ0YycpXHJcbiAgICAuZmFjdG9yeSgnRm9jdXNTcnYnLCBmdW5jdGlvbigkdGltZW91dCwgJHdpbmRvdykge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihpZCkge1xyXG4gICAgICAgICAgICAvLyB0aW1lb3V0IG1ha2VzIHN1cmUgdGhhdCBpcyBpbnZva2VkIGFmdGVyIGFueSBvdGhlciBldmVudCBoYXMgYmVlbiB0cmlnZ2VyZWQuXHJcbiAgICAgICAgICAgIC8vIGUuZy4gY2xpY2sgZXZlbnRzIHRoYXQgbmVlZCB0byBydW4gYmVmb3JlIHRoZSBmb2N1cyBvclxyXG4gICAgICAgICAgICAvLyBpbnB1dHMgZWxlbWVudHMgdGhhdCBhcmUgaW4gYSBkaXNhYmxlZCBzdGF0ZSBidXQgYXJlIGVuYWJsZWQgd2hlbiB0aG9zZSBldmVudHNcclxuICAgICAgICAgICAgLy8gYXJlIHRyaWdnZXJlZC5cclxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9ICR3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuYW5ndWxhclxyXG4gICAgLm1vZHVsZSgncGxhaW4td2VicnRjJylcclxuICAgIC5mYWN0b3J5KCdMb2dTcnYnLCBmdW5jdGlvbihBcHBDb25maWcpIHtcclxuICAgICAgICB2YXIgbG9nSW5mbyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoQXBwQ29uZmlnW1wibG9nLmluZm9cIl0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgbG9nRXJyb3IgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKEFwcENvbmZpZ1tcImxvZy5lcnJvclwiXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaW5mbzogbG9nSW5mbyxcclxuICAgICAgICAgICAgZXJyb3I6IGxvZ0Vycm9yXHJcbiAgICAgICAgfTtcclxuICAgIH0pOyIsIid1c2Ugc3RyaWN0JztcblxuYW5ndWxhci5tb2R1bGUoJ3BsYWluLXdlYnJ0YycpXG4gICAgLmZhY3RvcnkoJ1NvY2tldFNydicsIGZ1bmN0aW9uKCRyb290U2NvcGUsIExvZ1Nydikge1xuICAgICAgICB2YXIgc29ja2V0ID0gbnVsbDtcbiAgICAgICAgdmFyIHVzZXJzID0gW107XG4gICAgICAgIHZhciBvd25JZCA9IG51bGw7XG5cbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24oZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBlbWl0ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBkYXRhLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc29ja2V0LmVtaXQoZXZlbnROYW1lLCBkYXRhLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBjb25uZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBjb25uZWN0IHRvIFNvY2tldC5pbyBzZXJ2ZXJcbiAgICAgICAgICAgIHNvY2tldCA9IGlvLmNvbm5lY3QoKTtcblxuICAgICAgICAgICAgTG9nU3J2LmluZm8oJ1NvY2tldCBjb25uZWN0ZWQnKTtcblxuICAgICAgICAgICAgb24oJ2lkJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIG93bklkID0gZGF0YTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBvbigndXNlcnMudXBkYXRlJywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHBhcnNlVXNlckFycmF5KGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHBhcnNlVXNlckFycmF5ID0gZnVuY3Rpb24oX3VzZXJzKSB7XG4gICAgICAgICAgICB1c2VycyA9IF91c2Vycy5maWx0ZXIoZnVuY3Rpb24odXNlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyLmlkICE9PSBvd25JZDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZWdpc3RlciA9IGZ1bmN0aW9uKHVzZXJuYW1lKSB7XG4gICAgICAgICAgICBzb2NrZXQuZW1pdCgncmVnaXN0ZXInLCB7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29ubmVjdDogY29ubmVjdCxcbiAgICAgICAgICAgIHJlZ2lzdGVyOiByZWdpc3RlcixcbiAgICAgICAgICAgIGdldFVzZXJzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
